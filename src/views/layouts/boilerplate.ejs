<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LegalHuB</title>
        <link rel="icon" href="/pic/logo1.png" type="image/png" />

        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            crossorigin="anonymous" />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
            crossorigin="anonymous"
            referrerpolicy="no-referrer" />

        <!-- Google Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Rakkas&display=swap"
            rel="stylesheet" />
        <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>

        <!-- Global CSS -->
        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/login.css" />
        <link rel="stylesheet" href="/css/review.css" />
        <link rel="stylesheet" href="/css/contributor.css" />
        <link rel="stylesheet" href="/css/go-top.css"/>

        <!-- Page-specific CSS (home page, dictionary, faq, lawyers, etc.) -->
        <link rel="stylesheet" href="/css/home.css" />
    </head>

    <body>
        <!-- Navbar -->
        <%- include('../includes/navbar.ejs') %>

        <main>
            <!-- Flash Messages -->
            <%- include("../includes/flash.ejs") %>

            <!-- Page Content -->
            <%- body %>
        </main>

        <!-- Footer -->
        <%- include('../includes/footer.ejs') %>

        <!-- Google Translate Widget -->
        <div class="gtranslate_wrapper"></div>

        <!-- Bootstrap Form Validation -->
        <script>
            (function () {
                "use strict";
                var forms = document.querySelectorAll(".needs-validation");
                Array.prototype.slice.call(forms).forEach(function (form) {
                    form.addEventListener(
                        "submit",
                        function (event) {
                            if (!form.checkValidity()) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add("was-validated");
                        },
                        false
                    );
                });
            })();
        </script>

        <!-- Google Translate -->
        <script>
            window.gtranslateSettings = {
                default_language: "en",
                detect_browser_language: true,
                wrapper_selector: ".gtranslate_wrapper",
            };
        </script>
        <script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>

        <!-- Bootstrap JS -->
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
            crossorigin="anonymous"></script>

        <!-- Custom JS -->
        <script src="/js/login.js"></script>
        <script src="/js/home-animations.js"></script>

        <!-- (No navbar toggle script here â€” navbar.ejs contains the correct consolidated script) -->

        <!-- Chatbase Script -->
        <script>
            (function () {
                if (!window.chatbase || window.chatbase("getState") !== "initialized") {
                    window.chatbase = (...args) => {
                        if (!window.chatbase.q) window.chatbase.q = [];
                        window.chatbase.q.push(args);
                    };
                    window.chatbase = new Proxy(window.chatbase, {
                        get(target, prop) {
                            if (prop === "q") return target.q;
                            return (...args) => target(prop, ...args);
                        },
                    });
                }

                const onLoad = function () {
                    const script = document.createElement("script");
                    script.src = "https://www.chatbase.co/embed.min.js";
                    script.id = "vb1bB3pcTaS5bZJbzZhBe"; // Your chatbot ID
                    script.domain = "www.chatbase.co";
                    document.body.appendChild(script);
                };

                if (document.readyState === "complete") onLoad();
                else window.addEventListener("load", onLoad);
            })();
        </script>
        <button id="goTopBtn" title="Go to Top">
            <i class="fas fa-chevron-up"></i>
        </button>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const goTopBtn = document.getElementById("goTopBtn");

    // Show/hide "Go to Top" button
    window.addEventListener("scroll", () => {
      if (window.scrollY > 300) {
        goTopBtn.classList.add("show");
      } else {
        goTopBtn.classList.remove("show");
      }
    });

    // Smooth scroll to top
    goTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    // Adjust Chatbase button position
    const repositionChatbase = () => {
      const chatBtn = document.getElementById("chatbase-bubble-button");
      if (chatBtn) {
        chatBtn.style.bottom = "20px"; // Keep chat bubble lower
        chatBtn.style.right = "25px";
        chatBtn.style.zIndex = "2147483640";

        // Move GoToTop button above Chatbase
        goTopBtn.style.bottom = "90px";
        goTopBtn.style.right = "25px";
        goTopBtn.style.zIndex = "2147483645";
      }
    };

    // Run when page loads and re-check if Chatbase appears later
    repositionChatbase();
    const observer = new MutationObserver(repositionChatbase);
    observer.observe(document.body, { childList: true, subtree: true });
  });
</script>

        

    </body>
</html>
